<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>Services - Services - Add a New Port</title>
<link rel="stylesheet" href="../../../../styles/site.css" type="text/css" />
<style type="text/css">.highlight { background: #FFFF40; }</style> 
<script type="text/javascript" src="../highlight.js"></script></head>

<body onLoad="highlight();">
<h3>Add a New  Port</h3>

<p>To add a new port to a node, complete these steps:</p>
<p><strong>Note: </strong>New ports can be created in the System Configuration application. These ports can be tied to a specific binding.</p>
<ol>
  <li>From the Services page, click the node in which you want to add a port, and then click the <strong>New Port</strong> button.<br>
    <br>
    <img src="servicesNewPortButton.png" alt="Services tab - New Port button" border="1"><br>
    <br>
  </li>
  <li>From the New Dynamic Port dialog, enter the name of the port in the <strong>Port Name</strong> field.  This example uses the <a href="../../../../Service_Designer_Tool_User_Guide/Metadata_Objects/Built-in Service Providers/soap service provider.html">SOAP Service Provider</a>.<br>
    <br>
<strong>Note</strong>:  MQ listeners (<a href="../../../../Service_Designer_Tool_User_Guide/Metadata_Objects/Built-in Service Providers/MQ Service Provider.html" title="MQ Service Provider">MQ Service Provider</a>) and JMS  listeners (<a href="../../../../Service_Designer_Tool_User_Guide/Metadata_Objects/Built-in Service Providers/jms service provider.html" title="JMS Service Provider">JMS Service Provider</a>) are port-based.&nbsp; That is, a port needs  to be defined for each listener. Port settings for MQ and JMS listeners allow the choice of an  operation in the Port Details dialog.  
       A port can support multiple operations; however, each JMS and MQ listener is tied to a specific operation. By  default, the operation is the first operation in the interfaces operation list.    <br>
    <br>
    <img src="servicesNewSOAPportDialog.png" alt="Services tab - New SOAP Port dialog" border="1"><br>
    <br>
  </li>
  <li>For the <strong>Port Reference</strong> field, click the drop-down menu and select the reference from the list.</li>
  <li>Click the <strong>Add</strong> <strong>and Save </strong>button to launch the SOAP Port Details page. <br>
    <br>
    <img src="servicesSOAPportDetails.png" alt="Services tab - SOAP Port Details page" border="1"><br>
    <br>
    Complete the following fields corresponding to the port details:<br>
    <br>
    <table class='confluenceTable' border cellpadding="1" >
      <tbody>
        <tr>
          <th width="108" class='confluenceTh'>Field</th>
          <th width="744" class='confluenceTh'>Description</th>
        </tr>
        <tr>
          <td class='confluenceTd'><b>Port Name</b></td>
          <td class='confluenceTd'>The port name appears automatically, as you have entered this information in a previous step.</td>
        </tr>
        <tr>
          <td class='confluenceTd'><b>Binding</b></td>
          <td class='confluenceTd'>The port's binding automatically appears after having previously specified the <strong>Port Reference</strong> field.<br></td>
        </tr>
        <tr>
          <td class='confluenceTd'><strong>Operation</strong></td>
          <td class='confluenceTd'> For MQ and JMS, it is possible to support multiple operations (per queue) under  one port. <br>
            Port settings for MQ and JMS listeners allow the choice of an  operation.  
       A port can support multiple operations; however, each JMS and MQ listener is tied to a specific operation. By  default, the operation is the first operation in the interfaces operation list.          <br>
       More than one message queue port cannot be active for the same  operation.</td>
        </tr>
        <tr>
          <td class='confluenceTd'><b>Provider type</b></td>
          <td class='confluenceTd'>The service provider type (for example, SOAP) automatically appears after having previously specified the <strong>Port Reference</strong> field.</td>
        </tr>
        <tr>
          <td class='confluenceTd'><strong>Threads</strong></td>
          <td class='confluenceTd'>For MQ and JMS, this field is available.  It contains the number of threads that the listener has. The default value is 0, which disables the listener.</td>
        </tr>
        <tr>
          <td class='confluenceTd'><strong>Cache size</strong></td>
          <td class='confluenceTd'>This field denotes the number of connections to be cached for the service provider. The default is 100, which is also the maximum limit for this field.</td>
        </tr>
        <tr>
          <td class='confluenceTd'><b>Active</b></td>
          <td class='confluenceTd'>To indicate that this port is active, select this property's checkbox.<br>
            <br>
            For a given interface, there can only be the following:
          <ul>
            <li>One active port</li>
            <li>An unlimited number of active and backup ports</li>
            <li>An unlimited number of non-active ports</li>
      </ul>
          <p>A port being active or inactive is a cluster-wide configuration. The system behaviour becomes unpredictable if different ports are active on different nodes. As a result, an active port is configurable at the made node level only. This setting is applied to the corresponding running node on startup. </p>
          <p>For a non-clustered node, the following rules apply for ports:</p>
          <ul>
            <li>By default, ports created in metadata are active.</li>
            <li>If no configuration records exist for a port, create a record to indicate that this port is active. Otherwise, if they do exist, the port's configuration remains unchanged.</li>
            <li>For a newly created node, all ports are set to inactive status.</li>
          </ul></td>
        </tr>
        <tr>
          <td class='confluenceTd'><strong>Backup</strong></td>
          <td class='confluenceTd'><p>To indicate that this port is a backup port, select this property's checkbox. See the <strong>Active</strong> property for details about active and backup ports.</p></td>
        </tr>
        <tr>
          <td class='confluenceTd'><strong><a name=""enableStatistics></a>Enable
            Statistics</strong><br></td>
          <td class='confluenceTd'><p>Enables recording of statistics for this port and each operation in the port. The values recorded for the ports is the sum or 
            averages of the operation values.<br>
            For client ports, three statistics are recorded:</p>
            <ul>
              <li>Invocation: Count of invocations of an operation on this port.</li>
              <li> ProcessTime: Average time in milliseconds an operation took to process a request for a period.</li>
              <li> InvokeError: Count of errors during processing for an operation on this port.</li>
            </ul>
            <p>For listener ports, three statistics are recorded:</p>
            <ul>
              <li> ReceivedMessage: Count of messages received by a listener operation on this port.</li>
              <li> ProcessTime: Average time in milliseconds an operation took to process a request for a period.</li>
              <li> InvokeError: Count of errors during processing for an operation on this port.</li>
            </ul>
            <p>Statistics can be viewed in the System Administration application by clicking <strong>Interfaces </strong>&gt; <strong>Interface Statistics</strong> from the menu bar.<br>
              By default, interface statistics are persisted every 24 hours into the database in the CWBENCHMARKINTERVALCOUNTER table. This period, which is in seconds,  can be changed with the cwf.stat.storage.period JVM system environment property.</p>
            <p>Real-time statistics that represent the count and average values for the current time period can be viewed with <a href="../../../../Metadata Deployment Guide/Introduction JMX.html">JMX</a>. </p></td>
        </tr>
        <tr>
          <td class='confluenceTd'><strong>Dynamic</strong></td>
          <td class='confluenceTd'>By default, this field is selected, indicating that the port is dynamic.</td>
        </tr>
        <tr>
          <td class='confluenceTd'><STRONG>HTTP API Login Required</STRONG></td>
          <td class='confluenceTd'><p>This field provides a mandatory authentication mechanism   for individual APIs. When checked, login is required for any API access through HTTP, which is relevant to any <a href="../../../../Service_Designer_Tool_User_Guide/Metadata_Objects/Built-in Service Providers/set up an http api listener.html">HTTP</a> and <a href="../../../../Service_Designer_Tool_User_Guide/Metadata_Objects/Built-in Service Providers/set up a soap service listener.html">SOAP</a> listeners</A> created in the application.  This property is compatible with these listeners only, and is disabled if you have selected the <strong>HTTP API Login Required</strong> field on the <a href="../System/System/general.html"> General tab</a>.</p></td>
        </tr>
      </tbody>
    </table>
    <br>
  </li>
  <li>Expand the Provider Settings header to view its fields:<br>
    <br>
    <img src="servicesSOAPportDetailsProviderSettings.png" alt="Services tab - SOAP Port Details page - Provider Settings" border="1"><br>
    <br>
    <p>The Provider Settings section shows properties that are specific to a service provider of a service, such as <a href="../../../../Service_Designer_Tool_User_Guide/Metadata_Objects/Built-in Service Providers/http service provider.html">HTTP</a>, <a href="../../../../Service_Designer_Tool_User_Guide/Metadata_Objects/Built-in Service Providers/soap service provider.html">SOAP</a> or <a href="../../../../Service_Designer_Tool_User_Guide/Metadata_Objects/Built-in Service Providers/jms service provider.html">JMS</a>. You can find the description of the configuration properties of a <a href="../../../../Service_Designer_Tool_User_Guide/Metadata_Objects/Built-in Service Providers/built-in service providers.html">specific built-in service provider in the Velocity Studio User Guide</a>. For good reasons, not all configurations available in Velocity Studio are available in the Configuration application.<br>
      <br>
    Complete the following fields:    </p>
    <table class='confluenceTable' border cellpadding="1">
      <tbody>
        <tr>
          <th width="66" class='confluenceTh'>Field</th>
          <th width="786" class='confluenceTh'>Description</th>
        </tr>
        <tr>
          <td class='confluenceTd'><strong>Port Reference</strong></td>
          <td class='confluenceTd'>This field automatically recalls the service provider that you have previously selected. You can click the drop-down menu and change it, if required.</td>
        </tr>
        <tr>
          <td class='confluenceTd'><strong>Location</strong></td>
          <td class='confluenceTd'>This field allows you to specify the location of the SOAP service. This URL takes the following form:
            <div class="code">
              <div class="codeContent">
                <pre class="code-java">
http:<span class="code-comment">//host:port/cwf/services/&lt;interfaceName&gt;</span>            </pre>
              </div>
            </div>
Where <em>interfaceName</em> indicates the metadata Interface object implementing this service.</td>
        </tr>
        <tr>
          <td class='confluenceTd'><b>Reuse Session</b></td>
          <td class='confluenceTd'>By default, this field is unchecked, meaning that  a new user context is created for each request. Otherwise, selecting this field's checkbox means that  the user context is reused. Only listener ports use this field.</td>
        </tr>
        <tr>
          <td class='confluenceTd'><b>Maintain Session</b></td>
          <td class='confluenceTd'>Only client ports used this field. By default, this field is unchecked, meaning that the client session is not maintained (that is,  the cookie is not reused). Otherwise, selecting this field's checkbox means that the session between clients requests may be maintained.</td>
        </tr>
        <tr>
          <td class='confluenceTd'><b>Disable Chunked</b></td>
          <td class='confluenceTd'>This field is only valid for SOAP clients, and not listeners. When you select this checkbox, the SOAP request sent when invoking a SOAP interface is not chunked. In the sent properties in the message log, the Content-Length header appears. Otherwise, leaving this checkbox  unchecked indicates that the SOAP request is chunked. In the sent properties in the message log, the Transfer-Encoding header contains the <em>chunked</em> value. </td>
        </tr>
        <tr>
          <td colspan="2" class='confluenceTd'><p><strong><em>MQ-Specific Fields</em></strong><br>
          </p></td>
        </tr>
        <tr>
          <td class='confluenceTd'><strong>Queue Manager</strong></td>
          <td class='confluenceTd'>This field allows you to specify the queue manager name.</td>
        </tr>
        <tr>
          <td class='confluenceTd'><strong>Channel</strong></td>
          <td class='confluenceTd'>This field denotes the channel to use. </td>
        </tr>
        <tr>
          <td class='confluenceTd'><strong>Port</strong></td>
          <td class='confluenceTd'>This is the MQ port.</td>
        </tr>
        <tr>
          <td class='confluenceTd'><strong>Cipher Suite</strong></td>
          <td class='confluenceTd'>This field allows you to specify the cipher suite algorithm to be used by the MQ SSL. 
	This parameter is sent to activate the connection factory.</td>
        </tr>
        <tr>
          <td class='confluenceTd'><strong>User</strong></td>
          <td class='confluenceTd'>This field is the username if the server requires authentication.</td>
        </tr>
        <tr>
          <td class='confluenceTd'><strong>Password</strong></td>
          <td class='confluenceTd'>This field is the password for server access.</td>
        </tr>
        <tr>
          <td class='confluenceTd'><strong>JMS Client</strong></td>
          <td class='confluenceTd'>For MQ, this field denotes the JMS client for the port.</td>
        </tr>
        <tr>
          <td colspan="2" class='confluenceTd'><strong> <em>          JMS-Specific Fields
          </em></strong></td>
        </tr>
        <tr>
          <td class='confluenceTd'><p><strong>JNDI Class</strong></p></td>
          <td class='confluenceTd'>This field contains the full name of the initial context factory class.</td>
        </tr>
        <tr>
          <td class='confluenceTd'><strong>Factory</strong></td>
          <td class='confluenceTd'>This field is the JMS connection factory name to connect to the queue or topic. </td>
        </tr>
        <tr>
          <td class='confluenceTd'><strong>JNDI User</strong></td>
          <td class='confluenceTd'>This field is the JNDI username to connect to the server.</td>
        </tr>
        <tr>
          <td class='confluenceTd'><strong>JNDI Password</strong></td>
          <td class='confluenceTd'>This field is the JNDI password to connect to the server.</td>
        </tr>
      </tbody>
    </table>
    <br>
  </li>
  <li>Expand the <a href="../../../../Service_Designer_Tool_User_Guide/Metadata_Objects/Built-in Service Providers/soap WSS support.html">WSS Policy</a> header to view its fields:<br>
    <br>
    <img src="servicesSOAPportDetailsWSSpolicy.png" alt="Services tab - SOAP Port Details page - WSS Policy" border="1"><br>
    <br>
    Complete the following fields:<br>
    <br>
    <table class='confluenceTable' border cellpadding="1">
      <tbody>
        <tr>
          <th class='confluenceTh'>Field</th>
          <th class='confluenceTh'>Description</th>
        </tr>
        <tr>
          <td class='confluenceTd'><strong>Username Token User<br>
          </strong></td>
          <td class='confluenceTd'>This field represents the username value for the authentication token if it is required by policy file.<br></td>
        </tr>
        <tr>
          <td class='confluenceTd'><strong>Username Token<br>
            Password<br>
          </strong></td>
          <td class='confluenceTd'>This field denotes the password value for the authentication token if required by the policy file.<br></td>
        </tr>
        <tr>
          <td class='confluenceTd'><strong>Signing Certificate Alias<br>
          </strong></td>
          <td class='confluenceTd'>This field contains the Java keystore alias for either the certificate or private key used to sign parts of a message.<br></td>
        </tr>
        <tr>
          <td class='confluenceTd'><strong>Encryption Certificate<br>
            Alias<br>
          </strong></td>
          <td class='confluenceTd'>This field represents the Java keystore alias for either the certificate or public key used to encrypt parts of a message.<br></td>
        </tr>
        <tr>
          <td class='confluenceTd'><strong>WSS Policy</strong><br></td>
          <td class='confluenceTd'>Copy the contents of your  XML file that conforms to the W3C WS-Policy specification and paste it in this field. You can set this field  for both client and listener
          ports.<br></td>
        </tr>
      </tbody>
    </table>
    <br>
  </li>
  <li>Expand the Retry Policy header to view its fields: <br>
    <br>
    <img src="servicesSOAPportDetailsRetryPolicy.png" alt="Services tab - SOAP Port Details page - Retry Policy" border="1"><br>
    <br>
    <p>The Retry Policy section shows properties that are general to all service providers. 
    Complete the following fields:    </p>
    <table class='confluenceTable' border cellpadding="1">
      <tbody>
        <tr>
          <th class='confluenceTh'>Field</th>
          <th class='confluenceTh'>Description</th>
        </tr>
        <tr>
          <td class='confluenceTd'><b>Retry Count</b></td>
          <td class='confluenceTd'>This value is used to calculated the number of times the framework will try to use this Port before marking it unavailable (in error status). Default value is 3. The framework will try to use this port by this value + 1 times before erroring. Using the default value of 3 implies that the framework will try to use this port 4 times before the process status is in error.</td>
        </tr>
        <tr>
          <td class='confluenceTd'><b>Retry Delay (minute)</b></td>
          <td class='confluenceTd'>Specifies the delay (in minutes) between retries. Use 0 for no limit.<br></td>
        </tr>
        <tr>
          <td class='confluenceTd'><b>Recover After (minute)</b></td>
          <td class='confluenceTd'>Specifies how frequently the AVM will try to recover this Port after the Port has failed (that is, how often it will check if a service has become available on this port). Default value is 1.</td>
        </tr>
        <tr>
          <td class='confluenceTd'><b>Access (per minute)</b></td>
          <td class='confluenceTd'>Specifies how many times per minute the Port can be accessed. Use 0 for no limit. Default value is 0. </td>
        </tr>
        <tr>
          <td class='confluenceTd'><strong><a name=""enableStatistics></a>Enable
            Statistics</strong><br></td>
          <td class='confluenceTd'><p>Enables recording of statistics for this port and each operation in the port. The values recorded for the ports is the sum or 
            averages of the operation values.<br>
            For client ports, three statistics are recorded:</p>
            <ul>
              <li>Invocation: Count of invocations of an operation on this port.</li>
              <li> ProcessTime: Average time in milliseconds an operation took to process a request for a period.</li>
              <li> InvokeError: Count of errors during processing for an operation on this port.</li>
            </ul>
            <p>For listener ports, three statistics are recorded:</p>
            <ul>
              <li> ReceivedMessage: Count of messages received by a listener operation on this port.</li>
              <li> ProcessTime: Average time in milliseconds an operation took to process a request for a period.</li>
              <li> InvokeError: Count of errors during processing for an operation on this port.</li>
            </ul>
            <p>Statistics can be viewed in the System Administration application by clicking <strong>Interfaces </strong>&gt; <strong>Interface Statistics</strong> from the menu bar.<br>
              By default, interface statistics are persisted every 24 hours into the database in the CWBENCHMARKINTERVALCOUNTER table. This period, which is in seconds,  can be changed with the cwf.stat.storage.period JVM system environment property.</p>
            <p>Real-time statistics that represent the count and average values for the current time period can be viewed with <a href="../Metadata Deployment Guide/Introduction JMX.html">JMX</a>. </p></td>
        </tr>
      </tbody>
    </table>
    <br>
  </li>
  <li>Click the <strong>Save</strong> button. A confirmation message appears, indicating that you have successfully created your new port.</li>
  <li>Click  the <strong>Delete </strong>button to delete new dynamic ports<BR>
  </li>
</ol>
<p>&nbsp;</p>
</body>
</html>
